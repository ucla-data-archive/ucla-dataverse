
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>CSV/TSV &#8212; Dataverse.org</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Data Exploration Guide" href="../data-exploration/index.html" />
    <link rel="prev" title="Excel" href="excel.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>








<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#dv-bs-navbar-details">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://dataverse.org" id="dataverse-org-homepage-url">Dataverse Project</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->

       <div class="collapse navbar-collapse" id="dv-bs-navbar-details">
           <ul class="nav navbar-nav">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">About <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a target="_blank" href="http://dataverse.org/about">About the Project</a></li>
                        <li><a target="_blank" href="http://dataverse.org/add-data">Add Data</a></li>
                        <li><a target="_blank" href="http://dataverse.org/blog">Blog</a></li>
                        <li><a target="_blank" href="http://dataverse.org/presentations">Presentations</a></li>
                        <li><a target="_blank" href="http://dataverse.org/publications">Publications</a></li>
                    </ul>
                </li>
                <li>
                    <a target="_blank" href="http://dataverse.org/">
                        Community
                    </a>
                </li>
                <li>
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Best Practices <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a target="_blank" href="http://dataverse.org/data-citation">Academic Credit</a></li>
                        <li><a target="_blank" href="http://dataverse.org/harvard-dataverse-policies">Harvard Dataverse Policies</a></li>
                        <li><a target="_blank" href="http://dataverse.org/data-management">Data Management</a></li>
                        <li><a target="_blank" href="http://dataverse.org/replication-dataset">Replication Dataset Guidelines</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Software <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a target="_blank" href="http://dataverse.org/software-features">Features</a></li>
                        <li><a target="_blank" href="http://github.com/IQSS/dataverse">Source Code</a></li>
                        <li><a target="_blank" href="http://guides.dataverse.org/en/latest/user/index.html">User Guide</a></li>
                        <li><a target="_blank" href="http://guides.dataverse.org/en/latest/installation/index.html">Installation Guide</a></li>
                        <li><a target="_blank" href="http://guides.dataverse.org/en/latest/api/index.html">API Guide</a></li>
                        <li><a target="_blank" href="http://guides.dataverse.org/en/latest/developers/index.html">Developer Guide</a></li>
                        <li><a target="_blank" href="http://guides.dataverse.org/en/latest/style/index.html">Style Guide</a></li>
                        <li><a target="_blank" href="http://guides.dataverse.org/en/latest/admin/index.html">Admin Guide</a></li>
                    </ul>
                </li>
                <li>
                    <a target="_blank" href="http://dataverse.org/">
                        Contact
                    </a>
                </li>
            </ul>
       </div><!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary">
<form action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form><ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../account.html">Account Creation + Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../find-use-data.html">Finding and Using Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dataverse-management.html">Dataverse Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dataset-management.html">Dataset + File Management</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Tabular Data File Ingest</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="supportedformats.html">Supported File Formats</a></li>
<li class="toctree-l3"><a class="reference internal" href="ingestprocess.html">Tabular Data, Representation, Storage and Ingest</a></li>
<li class="toctree-l3"><a class="reference internal" href="spss.html">SPSS</a></li>
<li class="toctree-l3"><a class="reference internal" href="stata.html">Stata</a></li>
<li class="toctree-l3"><a class="reference internal" href="rdata.html">R Data Format</a></li>
<li class="toctree-l3"><a class="reference internal" href="excel.html">Excel</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">CSV/TSV</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../data-exploration/index.html">Data Exploration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix.html">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../style/index.html">Style Guide</a></li>
</ul>

        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="csv-tsv">
<h1>CSV/TSV<a class="headerlink" href="#csv-tsv" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="toctitle">
<p class="topic-title first">Contents:</p>
<ul class="simple">
<li><a class="reference internal" href="#ingest-of-comma-separated-values-and-tab-separated-values-files-as-tabular-data" id="id1">Ingest of Comma-Separated Values and Tab-Separated Values files as tabular data.</a></li>
<li><a class="reference internal" href="#main-formatting-requirements" id="id2">Main formatting requirements</a></li>
<li><a class="reference internal" href="#limitations" id="id3">Limitations</a></li>
<li><a class="reference internal" href="#recognized-data-types-and-formatting" id="id4">Recognized data types and formatting</a></li>
</ul>
</div>
<div class="section" id="ingest-of-comma-separated-values-and-tab-separated-values-files-as-tabular-data">
<h2><a class="toc-backref" href="#id1">Ingest of Comma-Separated Values and Tab-Separated Values files as tabular data.</a><a class="headerlink" href="#ingest-of-comma-separated-values-and-tab-separated-values-files-as-tabular-data" title="Permalink to this headline">¶</a></h2>
<p>Dataverse will make an attempt to turn CSV and TSV files uploaded by the user into tabular data, using the <a class="reference external" href="https://commons.apache.org/proper/commons-csv/">Apache CSV parser</a>.</p>
</div>
<div class="section" id="main-formatting-requirements">
<h2><a class="toc-backref" href="#id2">Main formatting requirements</a><a class="headerlink" href="#main-formatting-requirements" title="Permalink to this headline">¶</a></h2>
<p>The first row in the document will be treated as the CSV’s header, containing variable names for each column.</p>
<p>Each following row must contain the same number of comma-separated values (“cells”) as that header.</p>
<p>As of the Dataverse 4.8 release, we allow ingest of CSV files with commas and line breaks within cells. A string with any number of commas and line breaks enclosed within double quotes is recognized as a single cell. Double quotes can be encoded as two double quotes in a row (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>).</p>
<p>For example, the following lines:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>a,b,&quot;c,d
efgh&quot;&quot;ijk&quot;&quot;l&quot;,m,n
</pre></div>
</div>
<p>are recognized as a <strong>single</strong> row with <strong>5</strong> comma-separated values (cells):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>a
b
c,d\nefgh&quot;ijk&quot;l
m
n
</pre></div>
</div>
<p>(where <code class="docutils literal notranslate"><span class="pre">\n</span></code> is a new line character)</p>
</div>
<div class="section" id="limitations">
<h2><a class="toc-backref" href="#id3">Limitations</a><a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<p>Compared to other formats, relatively little information about the data (“variable-level metadata”) can be extracted from a CSV file. Aside from the variable names supplied in the top line, the ingest will make an educated guess about the data type of each comma-separated column. One of the supported rich file formats (Stata, SPSS and R) should be used if you need to provide more descriptive variable-level metadata (variable labels, categorical values and labels, explicitly defined data types, etc.).</p>
</div>
<div class="section" id="recognized-data-types-and-formatting">
<h2><a class="toc-backref" href="#id4">Recognized data types and formatting</a><a class="headerlink" href="#recognized-data-types-and-formatting" title="Permalink to this headline">¶</a></h2>
<p>The application will attempt to recognize numeric, string, and date/time values in the individual columns.</p>
<p>For dates, the <code class="docutils literal notranslate"><span class="pre">yyyy-MM-dd</span></code> format is recognized.</p>
<p>For date-time values, the following 2 formats are recognized:</p>
<p><code class="docutils literal notranslate"><span class="pre">yyyy-MM-dd</span> <span class="pre">HH:mm:ss</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">yyyy-MM-dd</span> <span class="pre">HH:mm:ss</span> <span class="pre">z</span></code> (same format as the above, with the time zone specified)</p>
<p>For numeric variables, the following special values are recognized:</p>
<p><code class="docutils literal notranslate"><span class="pre">inf</span></code>, <code class="docutils literal notranslate"><span class="pre">+inf</span></code> - as a special IEEE 754 “positive infinity” value;</p>
<p><code class="docutils literal notranslate"><span class="pre">NaN</span></code> - as a special IEEE 754 “not a number” value;</p>
<p>An empty value (i.e., a comma followed immediately by another comma, or the line end), or <code class="docutils literal notranslate"><span class="pre">NA</span></code> - as a <em>missing value</em>.</p>
<p><code class="docutils literal notranslate"><span class="pre">null</span></code> - as a numeric <em>zero</em>.</p>
<p>(any combinations of lower and upper cases are allowed in the notations above).</p>
<p>In character strings, an empty value (a comma followed by another comma, or the line end) is treated as an empty string (NOT as a <em>missing value</em>).</p>
<p>Any non-Latin characters are allowed in character string values, <strong>as long as the encoding is UTF8</strong>.</p>
<p><strong>Note:</strong> When the ingest recognizes a CSV or TSV column as a numeric vector, or as a date/time value, this information is reflected and saved in the database as the <em>data variable metadata</em>. To inspect that metadata, click on the <em>Download</em> button next to a tabular data file, and select <em>Variable Metadata</em>. This will export the variable records in the DDI XML format. (Alternatively, this metadata fragment can be downloaded via the Data Access API; for example: <code class="docutils literal notranslate"><span class="pre">http://localhost:8080/api/access/datafile/&lt;FILEID&gt;/metadata/ddi</span></code>).</p>
<p>The most immediate implication is in the calculation of the UNF signatures for the data vectors, as different normalization rules are applied to numeric, character, and date/time values. (see the <span class="xref std std-doc">/developers/unf/index</span> section for more information). If it is important to you that the UNF checksums of your data are accurately calculated, check that the numeric and date/time columns in your file were recognized as such (as <code class="docutils literal notranslate"><span class="pre">type=numeric</span></code> and <code class="docutils literal notranslate"><span class="pre">type=character,</span> <span class="pre">category=date(time)</span></code>, respectively). If, for example, a column that was supposed to be numeric is recognized as a vector of character values (strings), double-check that the formatting of the values is consistent. Remember, a single improperly-formatted value in the column will turn it into a vector of character strings, and result in a different UNF. Fix any formatting errors you find, delete the file from the dataset, and try to ingest it again.</p>
</div>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018, The President &amp; Fellows of Harvard College.<br/>
      Last updated on Oct 07, 2018.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.8.<br/>
    </p>
  </div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-57484542-1', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>