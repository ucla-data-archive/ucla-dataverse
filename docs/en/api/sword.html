
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>SWORD API &#8212; UCLA Dataverse</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Search API" href="search.html" />
    <link rel="prev" title="Introduction" href="intro.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>








<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#dv-bs-navbar-details">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://dataverse.ucla.edu" id="dataverse-org-homepage-url">UCLA Dataverse</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->

       <div class="collapse navbar-collapse" id="dv-bs-navbar-details">
           <ul class="nav navbar-nav">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">About <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a target="_blank" href="http://dataverse.org/about">About the Dataverse Project</a></li>
                        <li><a target="_blank" href="http://dataverse.org/add-data">Add Data</a></li>
                        <li><a target="_blank" href="http://dataverse.org/blog">Blog</a></li>
                        <li><a target="_blank" href="http://dataverse.org/presentations">Presentations</a></li>
                        <li><a target="_blank" href="http://dataverse.org/publications">Publications</a></li>
                    </ul>
                </li>
                <li>
                    <a target="_blank" href="http://dataverse.org/">
                        Community
                    </a>
                </li>
                <li>
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Best Practices <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a target="_blank" href="http://dataverse.org/data-citation">Academic Credit</a></li>
                        <li><a target="_blank" href="">UCLA Dataverse Policies</a></li>
                        <li><a target="_blank" href="http://dataverse.org/data-management">Data Management</a></li>
                        <li><a target="_blank" href="http://dataverse.org/replication-dataset">Replication Dataset Guidelines</a></li>
                    </ul>
                </li>
                <li>
                    <a target="_blank" href="mailto:datascience+dvn@ucla.edu">
                        Contact
                    </a>
                </li>
            </ul>
       </div><!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary">
<form action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../policy/index.html">UCLA Dataverse Policies</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">SWORD API</a></li>
<li class="toctree-l2"><a class="reference internal" href="search.html">Search API</a></li>
<li class="toctree-l2"><a class="reference internal" href="dataaccess.html">Data Access API</a></li>
<li class="toctree-l2"><a class="reference internal" href="native-api.html">Native API</a></li>
<li class="toctree-l2"><a class="reference internal" href="metrics.html">Metrics API</a></li>
<li class="toctree-l2"><a class="reference internal" href="client-libraries.html">Client Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="apps.html">Apps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../style/index.html">Style Guide</a></li>
</ul>

        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="sword-api">
<h1>SWORD API<a class="headerlink" href="#sword-api" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="http://en.wikipedia.org/wiki/SWORD_%28protocol%29">SWORD</a> stands for “Simple Web-service Offering Repository Deposit” and is a “profile” of AtomPub (<a class="reference external" href="https://tools.ietf.org/html/rfc5023">RFC 5023</a>) which is a RESTful API that allows non-Dataverse software to deposit files and metadata into a Dataverse installation. <a class="reference internal" href="#client-libraries"><span class="std std-ref">Client libraries</span></a> are available in Python, Java, R, Ruby, and PHP.</p>
<div class="contents local topic" id="toctitle">
<p class="topic-title first">Contents:</p>
<ul class="simple">
<li><a class="reference internal" href="#about" id="id5">About</a></li>
<li><a class="reference internal" href="#backward-incompatible-changes" id="id6">Backward incompatible changes</a></li>
<li><a class="reference internal" href="#new-features-as-of-v1-1" id="id7">New features as of v1.1</a></li>
<li><a class="reference internal" href="#curl-examples" id="id8">curl examples</a><ul>
<li><a class="reference internal" href="#retrieve-sword-service-document" id="id9">Retrieve SWORD service document</a></li>
<li><a class="reference internal" href="#create-a-dataset-with-an-atom-entry" id="id10">Create a dataset with an Atom entry</a><ul>
<li><a class="reference internal" href="#dublin-core-terms-dc-terms-qualified-mapping-dataverse-db-element-crosswalk" id="id11">Dublin Core Terms (DC Terms) Qualified Mapping - Dataverse DB Element Crosswalk</a></li>
</ul>
</li>
<li><a class="reference internal" href="#list-datasets-in-a-dataverse" id="id12">List datasets in a dataverse</a></li>
<li><a class="reference internal" href="#add-files-to-a-dataset-with-a-zip-file" id="id13">Add files to a dataset with a zip file</a></li>
<li><a class="reference internal" href="#display-a-dataset-atom-entry" id="id14">Display a dataset atom entry</a></li>
<li><a class="reference internal" href="#display-a-dataset-statement" id="id15">Display a dataset statement</a></li>
<li><a class="reference internal" href="#delete-a-file-by-database-id" id="id16">Delete a file by database id</a></li>
<li><a class="reference internal" href="#replacing-metadata-for-a-dataset" id="id17">Replacing metadata for a dataset</a></li>
<li><a class="reference internal" href="#delete-a-dataset" id="id18">Delete a dataset</a></li>
<li><a class="reference internal" href="#determine-if-a-dataverse-has-been-published" id="id19">Determine if a dataverse has been published</a></li>
<li><a class="reference internal" href="#publish-a-dataverse" id="id20">Publish a dataverse</a></li>
<li><a class="reference internal" href="#publish-a-dataset" id="id21">Publish a dataset</a></li>
</ul>
</li>
<li><a class="reference internal" href="#known-issues" id="id22">Known issues</a></li>
<li><a class="reference internal" href="#bug-fixes-in-v1-1" id="id23">Bug fixes in v1.1</a></li>
<li><a class="reference internal" href="#client-libraries" id="id24">Client libraries</a></li>
</ul>
</div>
<div class="section" id="about">
<h2><a class="toc-backref" href="#id5">About</a><a class="headerlink" href="#about" title="Permalink to this headline">¶</a></h2>
<p>Introduced in Dataverse Network (DVN) <a class="reference external" href="http://guides.dataverse.org/en/3.6.2/dataverse-api-main.html#data-deposit-api">3.6</a>, the SWORD API was formerly known as the “Data Deposit API” and <code class="docutils literal notranslate"><span class="pre">data-deposit/v1</span></code> appeared in the URLs. For backwards compatibility these URLs continue to work (with deprecation warnings). Due to architectural changes and security improvements (especially the introduction of API tokens) in Dataverse 4.0, a few backward incompatible changes were necessarily introduced and for this reason the version has been increased to <code class="docutils literal notranslate"><span class="pre">v1.1</span></code>. For details, see <a class="reference internal" href="#incompatible"><span class="std std-ref">Backward incompatible changes</span></a>.</p>
<p>Dataverse implements most of <a class="reference external" href="http://swordapp.org/sword-v2/sword-v2-specifications/">SWORDv2</a>, which is specified at <a class="reference external" href="http://swordapp.github.io/SWORDv2-Profile/SWORDProfile.html">http://swordapp.github.io/SWORDv2-Profile/SWORDProfile.html</a> . Please reference the <a class="reference external" href="http://swordapp.github.io/SWORDv2-Profile/SWORDProfile.html">SWORDv2 specification</a> for expected HTTP status codes (i.e. 201, 204, 404, etc.), headers (i.e. “Location”), etc. For a quick introduction to SWORD, the two minute video at <a class="reference external" href="http://cottagelabs.com/news/intro-to-sword-2">http://cottagelabs.com/news/intro-to-sword-2</a> is recommended.</p>
<p>As a profile of AtomPub, XML is used throughout SWORD. As of Dataverse 4.0 datasets can also be created via JSON using the “native” API. SWORD is limited to the dozen or so fields listed below in the crosswalk, but the native API allows you to populate all metadata fields available in Dataverse.</p>
</div>
<div class="section" id="backward-incompatible-changes">
<span id="incompatible"></span><h2><a class="toc-backref" href="#id6">Backward incompatible changes</a><a class="headerlink" href="#backward-incompatible-changes" title="Permalink to this headline">¶</a></h2>
<p>For better security than in DVN 3.x, usernames and passwords are no longer accepted. The use of an API token is required.</p>
<p>Differences in Dataverse 4 from DVN 3.x lead to a few minor backward incompatible changes in the Dataverse implementation of SWORD, which are listed below. Old <code class="docutils literal notranslate"><span class="pre">v1</span></code> URLs should continue to work but the <code class="docutils literal notranslate"><span class="pre">Service</span> <span class="pre">Document</span></code> will contain a deprecation warning and responses will contain <code class="docutils literal notranslate"><span class="pre">v1.1</span></code> URLs. See also <a class="reference internal" href="#known-issues"><span class="std std-ref">Known issues</span></a>.</p>
<ul class="simple">
<li>Newly required fields when creating/editing datasets for compliance with the <a class="reference external" href="http://thedata.org/blog/joint-declaration-data-citation-principles-and-dataverse">Joint Declaration for Data Citation principles</a>.<ul>
<li>dcterms:creator (maps to authorName)</li>
<li>dcterms:description</li>
</ul>
</li>
<li>Deaccessioning is no longer supported. An alternative will be developed at <a class="reference external" href="https://github.com/IQSS/dataverse/issues/778">https://github.com/IQSS/dataverse/issues/778</a></li>
<li>The Service Document will show a single API Terms of Use rather than root level and dataverse level Deposit Terms of Use.</li>
</ul>
</div>
<div class="section" id="new-features-as-of-v1-1">
<h2><a class="toc-backref" href="#id7">New features as of v1.1</a><a class="headerlink" href="#new-features-as-of-v1-1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Dataverse 4 supports API tokens and requires them to be used for APIs instead of a username and password. In the <code class="docutils literal notranslate"><span class="pre">curl</span></code> examples below, you will see <code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-u</span> <span class="pre">$API_TOKEN:</span></code> showing that you should send your API token as the username and nothing as the password. For example, <code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-u</span> <span class="pre">54b143b5-d001-4254-afc0-a1c0f6a5b5a7:</span></code>.</li>
<li>SWORD operations no longer require “admin” permission. In order to use any SWORD operation in DVN 3.x, you had to be an “admin” on a dataverse (the container for your dataset) and similar rules were applied in Dataverse 4.4 and earlier (the <code class="docutils literal notranslate"><span class="pre">EditDataverse</span></code> permission was required). The SWORD API has now been fully integrated with the Dataverse 4 permission model such that any action you have permission to perform in the GUI or “native” API you are able to perform via SWORD. This means that even a user with a “Contributor” role can operate on datasets via SWORD. Note that users with the “Contributor” role do not have the <code class="docutils literal notranslate"><span class="pre">PublishDataset</span></code> permission and will not be able publish their datasets via any mechanism, GUI or API.</li>
<li>Dataverses can be published via SWORD.</li>
<li>Datasets versions will only be increased to the next minor version (i.e. 1.1) rather than a major version (2.0) if possible. This depends on the nature of the change. Adding or removing a file, for example, requires a major version bump.</li>
<li>“Author Affiliation” can now be populated with an XML attribute. For example: &lt;dcterms:creator affiliation=”Coffee Bean State University”&gt;Stumptown, Jane&lt;/dcterms:creator&gt;</li>
<li>“Contributor” can now be populated and the “Type” (Editor, Funder, Researcher, etc.) can be specified with an XML attribute. For example: &lt;dcterms:contributor type=”Funder”&gt;CaffeineForAll&lt;/dcterms:contributor&gt;</li>
<li>“License” can now be set with dcterms:license and the possible values are “CC0” and “NONE”. “License” interacts with “Terms of Use” (dcterms:rights) in that if you include dcterms:rights in the XML, the license will be set to “NONE”. If you don’t include dcterms:rights, the license will default to “CC0”. It is invalid to specify “CC0” as a license and also include dcterms:rights; an error will be returned. For backwards compatibility, dcterms:rights is allowed to be blank (i.e. &lt;dcterms:rights&gt;&lt;/dcterms:rights&gt;) but blank values will not be persisted to the database and the license will be set to “NONE”.</li>
<li>“Contact E-mail” is automatically populated from dataset owner’s email.</li>
<li>“Subject” uses our controlled vocabulary list of subjects. This list is in the Citation Metadata of our User Guide &gt; <a class="reference external" href="http://guides.dataverse.org/en/latest/user/appendix.html#metadata-references">Metadata References</a>. Otherwise, if a term does not match our controlled vocabulary list, it will put any subject terms in “Keyword”. If Subject is empty it is automatically populated with “N/A”.</li>
<li>Zero-length files are now allowed (but not necessarily encouraged).</li>
<li>“Depositor” and “Deposit Date” are auto-populated.</li>
</ul>
</div>
<div class="section" id="curl-examples">
<h2><a class="toc-backref" href="#id8">curl examples</a><a class="headerlink" href="#curl-examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="retrieve-sword-service-document">
<h3><a class="toc-backref" href="#id9">Retrieve SWORD service document</a><a class="headerlink" href="#retrieve-sword-service-document" title="Permalink to this headline">¶</a></h3>
<p>The service document enumerates the dataverses (“collections” from a SWORD perspective) the user can deposit data into. The “collectionPolicy” element for each dataverse contains the Terms of Use. Any user with an API token can use this API endpoint. Institution-wide Shibboleth groups are not respected because membership in such a group can only be set via a browser.</p>
<p><code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-u</span> <span class="pre">$API_TOKEN:</span> <span class="pre">https://$HOSTNAME/dvn/api/data-deposit/v1.1/swordv2/service-document</span></code></p>
</div>
<div class="section" id="create-a-dataset-with-an-atom-entry">
<h3><a class="toc-backref" href="#id10">Create a dataset with an Atom entry</a><a class="headerlink" href="#create-a-dataset-with-an-atom-entry" title="Permalink to this headline">¶</a></h3>
<p>To create a dataset, you must have the “Dataset Creator” role (the <code class="docutils literal notranslate"><span class="pre">AddDataset</span></code> permission) on a dataverse. Practically speaking, you should first retrieve the service document to list the dataverses into which you are authorized to deposit data.</p>
<p><code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-u</span> <span class="pre">$API_TOKEN:</span> <span class="pre">--data-binary</span> <span class="pre">&quot;&#64;path/to/atom-entry-study.xml&quot;</span> <span class="pre">-H</span> <span class="pre">&quot;Content-Type:</span> <span class="pre">application/atom+xml&quot;</span> <span class="pre">https://$HOSTNAME/dvn/api/data-deposit/v1.1/swordv2/collection/dataverse/$DATAVERSE_ALIAS</span></code></p>
<p>Example Atom entry (XML)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;entry xmlns=&quot;http://www.w3.org/2005/Atom&quot;
       xmlns:dcterms=&quot;http://purl.org/dc/terms/&quot;&gt;
   &lt;!-- some embedded metadata --&gt;
   &lt;dcterms:title&gt;Roasting at Home&lt;/dcterms:title&gt;
   &lt;dcterms:creator&gt;Peets, John&lt;/dcterms:creator&gt;
   &lt;dcterms:creator affiliation=&quot;Coffee Bean State University&quot;&gt;Stumptown, Jane&lt;/dcterms:creator&gt;
   &lt;!-- Dataverse controlled vocabulary subject term --&gt;
   &lt;dcterms:subject&gt;Chemistry&lt;/dcterms:subject&gt;
   &lt;!-- keywords --&gt;
   &lt;dcterms:subject&gt;coffee&lt;/dcterms:subject&gt;
   &lt;dcterms:subject&gt;beverage&lt;/dcterms:subject&gt;
   &lt;dcterms:subject&gt;caffeine&lt;/dcterms:subject&gt;
   &lt;dcterms:description&gt;Considerations before you start roasting your own coffee at home.&lt;/dcterms:description&gt;
   &lt;!-- Producer with financial or admin responsibility of the data --&gt;
   &lt;dcterms:publisher&gt;Coffee Bean State University&lt;/dcterms:publisher&gt;
   &lt;dcterms:contributor type=&quot;Funder&quot;&gt;CaffeineForAll&lt;/dcterms:contributor&gt;
   &lt;!-- production date --&gt;
   &lt;dcterms:date&gt;2013-07-11&lt;/dcterms:date&gt;
   &lt;!-- kind of data --&gt;
   &lt;dcterms:type&gt;aggregate data&lt;/dcterms:type&gt;
   &lt;!-- List of sources of the data collection--&gt;
   &lt;dcterms:source&gt;Stumptown, Jane. 2011. Home Roasting. Coffeemill Press.&lt;/dcterms:source&gt;
   &lt;!-- related materials --&gt;
   &lt;dcterms:relation&gt;Peets, John. 2010. Roasting Coffee at the Coffee Shop. Coffeemill Press&lt;/dcterms:relation&gt;
   &lt;!-- geographic coverage --&gt;
   &lt;dcterms:coverage&gt;United States&lt;/dcterms:coverage&gt;
   &lt;dcterms:coverage&gt;Canada&lt;/dcterms:coverage&gt;
   &lt;!-- license and restrictions --&gt;
   &lt;dcterms:license&gt;NONE&lt;/dcterms:license&gt;
   &lt;dcterms:rights&gt;Downloader will not use the Materials in any way prohibited by applicable laws.&lt;/dcterms:rights&gt;
   &lt;!-- related publications --&gt;
   &lt;dcterms:isReferencedBy holdingsURI=&quot;http://dx.doi.org/10.1038/dvn333&quot; agency=&quot;DOI&quot; IDNo=&quot;10.1038/dvn333&quot;&gt;Peets, J., &amp;amp; Stumptown, J. (2013). Roasting at Home. New England Journal of Coffee, 3(1), 22-34.&lt;/dcterms:isReferencedBy&gt;
&lt;/entry&gt;
</pre></div>
</div>
<div class="section" id="dublin-core-terms-dc-terms-qualified-mapping-dataverse-db-element-crosswalk">
<h4><a class="toc-backref" href="#id11">Dublin Core Terms (DC Terms) Qualified Mapping - Dataverse DB Element Crosswalk</a><a class="headerlink" href="#dublin-core-terms-dc-terms-qualified-mapping-dataverse-db-element-crosswalk" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="19%" />
<col width="6%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">DC (terms: namespace)</th>
<th class="head">Dataverse DB Element</th>
<th class="head">Required</th>
<th class="head">Note</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>dcterms:title</td>
<td>title</td>
<td>Y</td>
<td>Title of the Dataset.</td>
</tr>
<tr class="row-odd"><td>dcterms:creator</td>
<td>authorName (LastName, FirstName)</td>
<td>Y</td>
<td>Author(s) for the Dataset.</td>
</tr>
<tr class="row-even"><td>dcterms:subject</td>
<td>subject (Controlled Vocabulary) OR keyword</td>
<td>Y</td>
<td>Controlled Vocabulary list is in our User Guide &gt; <a class="reference external" href="http://guides.dataverse.org/en/latest/user/appendix.html#metadata-references">Metadata References</a>.</td>
</tr>
<tr class="row-odd"><td>dcterms:description</td>
<td>dsDescriptionValue</td>
<td>Y</td>
<td>Describing the purpose, scope or nature of the Dataset. Can also use dcterms:abstract.</td>
</tr>
<tr class="row-even"><td>dcterms:publisher</td>
<td>producerName</td>
<td>&#160;</td>
<td>Person or agency financially or administratively responsible for the Dataset</td>
</tr>
<tr class="row-odd"><td>dcterms:contributor</td>
<td>datasetContactEmail</td>
<td>Y</td>
<td>Contact Email is required so will need to add an attribute type=”Contact”. Also used for Funder: add attribute type=”Funder” which maps to contributorName.</td>
</tr>
<tr class="row-even"><td>dcterms:date</td>
<td>productionDate (YYYY-MM-DD or YYYY-MM or YYYY)</td>
<td>&#160;</td>
<td>Production date of Dataset.</td>
</tr>
<tr class="row-odd"><td>dcterms:type</td>
<td>kindOfData</td>
<td>&#160;</td>
<td>Type of data included in the file: survey data, census/enumeration data, aggregate data, clinical.</td>
</tr>
<tr class="row-even"><td>dcterms:source</td>
<td>dataSources</td>
<td>&#160;</td>
<td>List of books, articles, data files if any that served as the sources for the Dataset.</td>
</tr>
<tr class="row-odd"><td>dcterms:relation</td>
<td>relatedMaterial</td>
<td>&#160;</td>
<td>Any related material (journal article citation is not included here - see: dcterms:isReferencedBy below).</td>
</tr>
<tr class="row-even"><td>dcterms:coverage</td>
<td>otherGeographicCoverage</td>
<td>&#160;</td>
<td>General information on the geographic coverage of the Dataset.</td>
</tr>
<tr class="row-odd"><td>dcterms:license</td>
<td>license</td>
<td>&#160;</td>
<td>Set the license to CC0 (default in Dataverse for new Datasets), otherwise enter “NONE” and fill in the dcterms:rights field.</td>
</tr>
<tr class="row-even"><td>dcterms:rights</td>
<td>termsofuse</td>
<td>&#160;</td>
<td>If not using CC0, enter any terms of use or restrictions for the Dataset.</td>
</tr>
<tr class="row-odd"><td>dcterms:isReferencedBy</td>
<td>publicationCitation</td>
<td>&#160;</td>
<td>The publication (journal article, book, other work) that uses this dataset (include citation, permanent identifier (DOI), and permanent URL).</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="list-datasets-in-a-dataverse">
<h3><a class="toc-backref" href="#id12">List datasets in a dataverse</a><a class="headerlink" href="#list-datasets-in-a-dataverse" title="Permalink to this headline">¶</a></h3>
<p>You must have permission to add datasets in a dataverse (the dataverse should appear in the service document) to list the datasets inside. Institution-wide Shibboleth groups are not respected because membership in such a group can only be set via a browser.</p>
<p><code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-u</span> <span class="pre">$API_TOKEN:</span> <span class="pre">https://$HOSTNAME/dvn/api/data-deposit/v1.1/swordv2/collection/dataverse/$DATAVERSE_ALIAS</span></code></p>
</div>
<div class="section" id="add-files-to-a-dataset-with-a-zip-file">
<h3><a class="toc-backref" href="#id13">Add files to a dataset with a zip file</a><a class="headerlink" href="#add-files-to-a-dataset-with-a-zip-file" title="Permalink to this headline">¶</a></h3>
<p>You must have <code class="docutils literal notranslate"><span class="pre">EditDataset</span></code> permission (Contributor role or above such as Curator or Admin) on the dataset to add files.</p>
<p><code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-u</span> <span class="pre">$API_TOKEN:</span> <span class="pre">--data-binary</span> <span class="pre">&#64;path/to/example.zip</span> <span class="pre">-H</span> <span class="pre">&quot;Content-Disposition:</span> <span class="pre">filename=example.zip&quot;</span> <span class="pre">-H</span> <span class="pre">&quot;Content-Type:</span> <span class="pre">application/zip&quot;</span> <span class="pre">-H</span> <span class="pre">&quot;Packaging:</span> <span class="pre">http://purl.org/net/sword/package/SimpleZip&quot;</span> <span class="pre">https://$HOSTNAME/dvn/api/data-deposit/v1.1/swordv2/edit-media/study/doi:TEST/12345</span></code></p>
</div>
<div class="section" id="display-a-dataset-atom-entry">
<h3><a class="toc-backref" href="#id14">Display a dataset atom entry</a><a class="headerlink" href="#display-a-dataset-atom-entry" title="Permalink to this headline">¶</a></h3>
<p>You must have <code class="docutils literal notranslate"><span class="pre">ViewUnpublishedDataset</span></code> permission (Contributor role or above such as Curator or Admin) on the dataset to view its Atom entry.</p>
<p>Contains data citation (bibliographicCitation), alternate URI (persistent URI of study), edit URI, edit media URI, statement URI.</p>
<p><code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-u</span> <span class="pre">$API_TOKEN:</span> <span class="pre">https://$HOSTNAME/dvn/api/data-deposit/v1.1/swordv2/edit/study/doi:TEST/12345</span></code></p>
</div>
<div class="section" id="display-a-dataset-statement">
<h3><a class="toc-backref" href="#id15">Display a dataset statement</a><a class="headerlink" href="#display-a-dataset-statement" title="Permalink to this headline">¶</a></h3>
<p>Contains title, author, feed of file entries, latestVersionState, locked boolean, updated timestamp. You must have <code class="docutils literal notranslate"><span class="pre">ViewUnpublishedDataset</span></code> permission (Contributor role or above such as Curator or Admin) on the dataset to display the statement.</p>
<p><code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-u</span> <span class="pre">$API_TOKEN:</span> <span class="pre">https://$HOSTNAME/dvn/api/data-deposit/v1.1/swordv2/statement/study/doi:TEST/12345</span></code></p>
</div>
<div class="section" id="delete-a-file-by-database-id">
<h3><a class="toc-backref" href="#id16">Delete a file by database id</a><a class="headerlink" href="#delete-a-file-by-database-id" title="Permalink to this headline">¶</a></h3>
<p>You must have <code class="docutils literal notranslate"><span class="pre">EditDataset</span></code> permission (Contributor role or above such as Curator or Admin) on the dataset to delete files.</p>
<p><code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-u</span> <span class="pre">$API_TOKEN:</span> <span class="pre">-X</span> <span class="pre">DELETE</span> <span class="pre">https://$HOSTNAME/dvn/api/data-deposit/v1.1/swordv2/edit-media/file/123</span></code></p>
</div>
<div class="section" id="replacing-metadata-for-a-dataset">
<h3><a class="toc-backref" href="#id17">Replacing metadata for a dataset</a><a class="headerlink" href="#replacing-metadata-for-a-dataset" title="Permalink to this headline">¶</a></h3>
<p>Please note that <strong>ALL</strong> metadata (title, author, etc.) will be replaced, including fields that can not be expressed with “dcterms” fields. You must have <code class="docutils literal notranslate"><span class="pre">EditDataset</span></code> permission (Contributor role or above such as Curator or Admin) on the dataset to replace metadata.</p>
<p><code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-u</span> <span class="pre">$API_TOKEN:</span> <span class="pre">--upload-file</span> <span class="pre">&quot;path/to/atom-entry-study2.xml&quot;</span> <span class="pre">-H</span> <span class="pre">&quot;Content-Type:</span> <span class="pre">application/atom+xml&quot;</span> <span class="pre">https://$HOSTNAME/dvn/api/data-deposit/v1.1/swordv2/edit/study/doi:TEST/12345</span></code></p>
</div>
<div class="section" id="delete-a-dataset">
<h3><a class="toc-backref" href="#id18">Delete a dataset</a><a class="headerlink" href="#delete-a-dataset" title="Permalink to this headline">¶</a></h3>
<p>You must have the <code class="docutils literal notranslate"><span class="pre">DeleteDatasetDraft</span></code> permission (Contributor role or above such as Curator or Admin) on the dataset to delete it. Please note that if the dataset has never been published you will be able to delete it completely but if the dataset has already been published you will only be able to delete post-publication drafts, never a published version.</p>
<p><code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-u</span> <span class="pre">$API_TOKEN:</span> <span class="pre">-i</span> <span class="pre">-X</span> <span class="pre">DELETE</span> <span class="pre">https://$HOSTNAME/dvn/api/data-deposit/v1.1/swordv2/edit/study/doi:TEST/12345</span></code></p>
</div>
<div class="section" id="determine-if-a-dataverse-has-been-published">
<h3><a class="toc-backref" href="#id19">Determine if a dataverse has been published</a><a class="headerlink" href="#determine-if-a-dataverse-has-been-published" title="Permalink to this headline">¶</a></h3>
<p>This API endpoint is the same as the “list datasets in a dataverse” endpoint documented above and the same permissions apply but it is documented here separately to point out that you can look for a boolean called <code class="docutils literal notranslate"><span class="pre">dataverseHasBeenReleased</span></code> to know if a dataverse has been released, which is required for publishing a dataset.</p>
<p><code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-u</span> <span class="pre">$API_TOKEN:</span> <span class="pre">https://$HOSTNAME/dvn/api/data-deposit/v1.1/swordv2/collection/dataverse/$DATAVERSE_ALIAS</span></code></p>
</div>
<div class="section" id="publish-a-dataverse">
<h3><a class="toc-backref" href="#id20">Publish a dataverse</a><a class="headerlink" href="#publish-a-dataverse" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">/dev/null</span></code> and <code class="docutils literal notranslate"><span class="pre">--data-binary</span> <span class="pre">&#64;-</span></code> arguments are used to send zero-length content to the API, which is required by the upstream library to process the <code class="docutils literal notranslate"><span class="pre">In-Progress:</span> <span class="pre">false</span></code> header. You must have the <code class="docutils literal notranslate"><span class="pre">PublishDataverse</span></code> permission (Admin role) on the dataverse to publish it.</p>
<p><code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">/dev/null</span> <span class="pre">|</span> <span class="pre">curl</span> <span class="pre">-u</span> <span class="pre">$API_TOKEN:</span> <span class="pre">-X</span> <span class="pre">POST</span> <span class="pre">-H</span> <span class="pre">&quot;In-Progress:</span> <span class="pre">false&quot;</span> <span class="pre">--data-binary</span> <span class="pre">&#64;-</span> <span class="pre">https://$HOSTNAME/dvn/api/data-deposit/v1.1/swordv2/edit/dataverse/$DATAVERSE_ALIAS</span></code></p>
</div>
<div class="section" id="publish-a-dataset">
<h3><a class="toc-backref" href="#id21">Publish a dataset</a><a class="headerlink" href="#publish-a-dataset" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">/dev/null</span></code> and <code class="docutils literal notranslate"><span class="pre">--data-binary</span> <span class="pre">&#64;-</span></code> arguments are used to send zero-length content to the API, which is required by the upstream library to process the <code class="docutils literal notranslate"><span class="pre">In-Progress:</span> <span class="pre">false</span></code> header. You must have the <code class="docutils literal notranslate"><span class="pre">PublishDataset</span></code> permission (Curator or Admin role) on the dataset to publish it.</p>
<p><code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">/dev/null</span> <span class="pre">|</span> <span class="pre">curl</span> <span class="pre">-u</span> <span class="pre">$API_TOKEN:</span> <span class="pre">-X</span> <span class="pre">POST</span> <span class="pre">-H</span> <span class="pre">&quot;In-Progress:</span> <span class="pre">false&quot;</span> <span class="pre">--data-binary</span> <span class="pre">&#64;-</span> <span class="pre">https://$HOSTNAME/dvn/api/data-deposit/v1.1/swordv2/edit/study/doi:TEST/12345</span></code></p>
</div>
</div>
<div class="section" id="known-issues">
<span id="id3"></span><h2><a class="toc-backref" href="#id22">Known issues</a><a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Deleting a file from a published version (not a draft) creates a draft but doesn’t delete the file: <a class="reference external" href="https://github.com/IQSS/dataverse/issues/2464">https://github.com/IQSS/dataverse/issues/2464</a></li>
<li>The Service Document does not honor groups within groups: <a class="reference external" href="https://github.com/IQSS/dataverse/issues/3056">https://github.com/IQSS/dataverse/issues/3056</a></li>
<li>Should see all the fields filled in for a dataset regardless of what the parent dataverse specifies: <a class="reference external" href="https://github.com/IQSS/dataverse/issues/756">https://github.com/IQSS/dataverse/issues/756</a></li>
<li>SWORD 2.0 Profile 6.4 “Retrieving the content” has not been implemented: <a class="reference external" href="https://github.com/IQSS/dataverse/issues/183">https://github.com/IQSS/dataverse/issues/183</a></li>
<li>Deaccessioning via API is not supported (it was in DVN 3.x): <a class="reference external" href="https://github.com/IQSS/dataverse/issues/778">https://github.com/IQSS/dataverse/issues/778</a></li>
<li>Let file metadata (i.e. description) be specified during zip upload: <a class="reference external" href="https://github.com/IQSS/dataverse/issues/723">https://github.com/IQSS/dataverse/issues/723</a></li>
<li>SWORD: Display of actual dcterms xml element for equivalent of required field not found: <a class="reference external" href="https://github.com/IQSS/dataverse/issues/1019">https://github.com/IQSS/dataverse/issues/1019</a></li>
</ul>
</div>
<div class="section" id="bug-fixes-in-v1-1">
<h2><a class="toc-backref" href="#id23">Bug fixes in v1.1</a><a class="headerlink" href="#bug-fixes-in-v1-1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Fix Abdera ArrayIndexOutOfBoundsException with non-existent atom-entry-study.xml in SWORD jar (upstream ideally) <a class="reference external" href="https://github.com/IQSS/dataverse/issues/893">https://github.com/IQSS/dataverse/issues/893</a></li>
<li>Sword API: Can’t create study when hidden characters are introduced in atom.xml <a class="reference external" href="https://github.com/IQSS/dataverse/issues/894">https://github.com/IQSS/dataverse/issues/894</a></li>
</ul>
</div>
<div class="section" id="client-libraries">
<span id="id4"></span><h2><a class="toc-backref" href="#id24">Client libraries</a><a class="headerlink" href="#client-libraries" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Python: <a class="reference external" href="https://github.com/swordapp/python-client-sword2">https://github.com/swordapp/python-client-sword2</a></li>
<li>Java: <a class="reference external" href="https://github.com/swordapp/JavaClient2.0">https://github.com/swordapp/JavaClient2.0</a></li>
<li>R: <a class="reference external" href="https://github.com/IQSS/dataverse-client-r">https://github.com/IQSS/dataverse-client-r</a></li>
<li>Ruby: <a class="reference external" href="https://github.com/swordapp/sword2ruby">https://github.com/swordapp/sword2ruby</a></li>
<li>PHP: <a class="reference external" href="https://github.com/swordapp/swordappv2-php-library">https://github.com/swordapp/swordappv2-php-library</a></li>
</ul>
</div>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018, UC Regents.<br/>
      Last updated on Nov 12, 2018.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1.<br/>
    </p>
  </div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-57484542-1', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>